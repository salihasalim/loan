{% extends 'includes/base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-xl-12 col-lg-7">
        <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">All Franchises</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive-xxl">
                    <table class="table table-bordered table-hover all-users">
                        <thead>
                            <tr>
                                <th scope="col">Sr. No</th>
                                <th scope="col">Franchise Name</th>
                                <th scope="col">Owner</th>
                                <th scope="col">Place</th>
                                <th scope="col">Email</th>
                                <th scope="col">Mobile</th>
                                <th scope="col">Wallet</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for franchise in franchises %}
                            <tr>
                                <th scope="row">{{ forloop.counter }}</th>
                                <td>{{ franchise.franchise_name }}</td>
                                <td>{{ franchise.franchise_owner }}</td>
                                <td>{{ franchise.franchise_place }}</td>
                                <td>{{ franchise.email }}</td>
                                <td>{{ franchise.mobile_no }}</td>
                                <td>â‚¹{{ franchise.wallet_balance }}</td>
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <!-- Update Button -->
                                        <a href="{% url 'edit_franchise' franchise.franchise_id %}" class="btn btn-sm btn-warning mx-1">
                                            <i class="fas fa-edit"></i> Edit
                                        </a>
                                        <!-- Delete Button -->
                                        <a href="{% url 'delete_franchise' franchise.franchise_id %}" class="btn btn-sm btn-danger mx-1" 
                                           onclick="return confirm('Are you sure you want to delete this franchise?');">
                                            <i class="fas fa-trash-alt"></i> Delete
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="8" class="text-center">No franchises found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
