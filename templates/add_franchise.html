{% extends 'includes/base.html' %}
{% load static %}

{% block content %}

<!-- Begin Page Content -->
<div class="container-fluid">

    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Franchise Management</h1>
    </div>

    <!-- Content Row -->
    <div class="row">
        <!-- Add Franchise Form -->
        <div class="col-xl-12 col-lg-7">
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">
                        {% if is_edit %} Edit Franchise {% else %} Add Franchise {% endif %}
                    </h6>
                </div>
                <div class="card-body">
                    <form class="p-5 user" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <!-- Show all errors at the top of the form -->
                        {% if form.errors %}
                            <div class="alert alert-danger">
                                <strong>Please correct the following errors:</strong>
                                <ul>
                                    {% for field in form %}
                                        {% for error in field.errors %}
                                            <li>{{ error }}</li>
                                        {% endfor %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                        
                        <!-- Franchise Name -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Franchise Name</label>
                            <div class="col-sm-10">
                                {{ form.franchise_name }}
                                {% if form.franchise_name.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.franchise_name.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <!-- Franchise Owner -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Franchise Owner</label>
                            <div class="col-sm-10">
                                {{ form.franchise_owner }}
                                {% if form.franchise_owner.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.franchise_owner.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Franchise Place -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Franchise Place</label>
                            <div class="col-sm-10">
                                {{ form.franchise_place }}
                                {% if form.franchise_place.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.franchise_place.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Email</label>
                            <div class="col-sm-10">
                                {{ form.email }}
                                {% if form.email.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.email.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Mobile Number -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Mobile Number</label>
                            <div class="col-sm-10">
                                {{ form.mobile_no }}
                                {% if form.mobile_no.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.mobile_no.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Password -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Password</label>
                            <div class="col-sm-10">
                                <input type="text" name="password" class="form-control" value="{{ form.password.value|default:form.instance.password }}">
                                {% if form.password.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.password.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <!-- Confirm Password -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Confirm Password</label>
                            <div class="col-sm-10">
                                {{ form.confirm_password }}
                                {% if form.confirm_password.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.confirm_password.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Aadhar -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Aadhar</label>
                            <div class="col-sm-10">
                                {{ form.aadhar }}
                                {% if form.aadhar.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.aadhar.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- GST -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">GST</label>
                            <div class="col-sm-10">
                                {{ form.GST }}
                                {% if form.GST.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.GST.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- PAN -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">PAN</label>
                            <div class="col-sm-10">
                                {{ form.pan }}
                                {% if form.pan.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.pan.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Account Number -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Account Number</label>
                            <div class="col-sm-10">
                                {{ form.ac_no }}
                                {% if form.ac_no.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.ac_no.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- IFSC Code -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">IFSC Code</label>
                            <div class="col-sm-10">
                                {{ form.ifsc_code }}
                                {% if form.ifsc_code.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.ifsc_code.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Wallet Balance -->
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Wallet Balance</label>
                            <div class="col-sm-10">
                                {{ form.wallet_balance }}
                                {% if form.wallet_balance.errors %}
                                    <div class="invalid-feedback">
                                        <p>{{ form.wallet_balance.errors.as_text }}</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Upload Screenshot</label>
                            <div class="col-sm-10">
                                {{ form.screenshot }}
                                {% if form.screenshot.errors %}
                                    <div class="text-danger">
                                        {{ form.screenshot.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="id_is_active" class="col-sm-2 col-form-label">Payment Status</label>
                            <div class="col-sm-10">
                                {{ form.payment_status}}
                                {% if form.is_active.errors %}
                                    <p class="text-danger small">{{ form.is_active.errors }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="id_is_active" class="col-sm-2 col-form-label">Franchise</label>
                            <div class="col-sm-10">
                                {{ form.is_franchise }}
                                {% if form.is_active.errors %}
                                    <p class="text-danger small">{{ form.is_active.errors }}</p>
                                {% endif %}
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <input type="submit" class="btn btn-primary btn-user btn-block d-block mx-auto" value="{% if is_edit %}Update{% else %}Add{% endif %}">
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}
